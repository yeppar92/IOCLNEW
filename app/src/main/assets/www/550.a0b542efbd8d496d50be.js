(self.webpackChunkapp=self.webpackChunkapp||[]).push([[550],{5550:(i,e,t)=>{"use strict";t.r(e),t.d(e,{VrzoneModule:()=>S});var s=t(1116),a=t(4587),o=t(529),n=t(8619),r=t(4345),l=t(3492),c=t(6710),d=t(992);function m(i,e){if(1&i&&(n.TgZ(0,"span",24),n._uU(1),n.qZA()),2&i){const i=n.oxw().$implicit;n.xp6(1),n.Oqu(i.numOfLikes)}}function g(i,e){if(1&i&&(n.TgZ(0,"span",24),n._uU(1),n.qZA()),2&i){const i=n.oxw().$implicit;n.xp6(1),n.Oqu(i.numOfComments)}}const h=function(i){return["/vrzone/detail",i]},p=function(i){return{active:i}};function _(i,e){if(1&i){const i=n.EpF();n.TgZ(0,"div",6),n.TgZ(1,"div",7),n._UZ(2,"img",8),n.TgZ(3,"a",9),n._UZ(4,"img",10),n.qZA(),n.TgZ(5,"ul",11),n.TgZ(6,"li"),n.TgZ(7,"a",12),n.NdJ("click",function(){const e=n.CHM(i).$implicit;return n.oxw().addLike(e._id)}),n._UZ(8,"img",13),n._UZ(9,"img",14),n.YNc(10,m,2,1,"span",15),n.qZA(),n.qZA(),n.TgZ(11,"li"),n.TgZ(12,"a",16),n._UZ(13,"img",17),n.YNc(14,g,2,1,"span",15),n.qZA(),n.qZA(),n.TgZ(15,"li"),n.TgZ(16,"a",12),n.NdJ("click",function(){const e=n.CHM(i).$implicit;return n.oxw().addBookmark(e._id)}),n._UZ(17,"img",18),n._UZ(18,"img",19),n.qZA(),n.qZA(),n.TgZ(19,"li",20),n.TgZ(20,"a",21),n.NdJ("click",function(){const e=n.CHM(i).$implicit;return n.oxw().postShare(e._id)}),n._UZ(21,"img",22),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",23),n.TgZ(23,"h3"),n.TgZ(24,"a",16),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"p"),n._uU(27),n.qZA(),n.qZA(),n.qZA()}if(2&i){const i=e.$implicit;n.xp6(2),n.Q6J("src",i.thumbnail,n.LSH),n.xp6(1),n.Q6J("routerLink",n.VKq(10,h,i._id)),n.xp6(5),n.Q6J("ngClass",n.VKq(12,p,i.isLiked)),n.xp6(2),n.Q6J("ngIf",i.numOfLikes),n.xp6(2),n.Q6J("routerLink",n.VKq(14,h,i._id)),n.xp6(2),n.Q6J("ngIf",i.numOfComments),n.xp6(3),n.Q6J("ngClass",n.VKq(16,p,i.isBookmarked)),n.xp6(7),n.Q6J("routerLink",n.VKq(18,h,i._id)),n.xp6(1),n.Oqu(i.title),n.xp6(2),n.Oqu(i.description)}}let u=(()=>{class i{constructor(i,e,t){this.userService=i,this.toastr=e,this.spinner=t,this.timewalls=[]}ngOnInit(){this.getAllPosts()}addPoints(i,e,t){this.userService.addPoints({post_id:t,points:i,activity:e}).subscribe(i=>{})}getAllPosts(){this.spinner.show(),this.userService.getAllPosts({type:"VRZONE"}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewalls=i.data.posts,this.timewalls.map(i=>{i.thumbnail=o.N.api_url+"/post/thumbnail/"+i.thumbnail})):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(i){this.spinner.show(),this.userService.addLike({post_id:i}).subscribe(e=>{this.spinner.hide(),200===e.statusCode?this.timewalls.find(e=>{e._id==i&&(e.isLiked?(e.numOfLikes-=1,e.isLiked=!1,this.addPoints(-5,"Unlike",i)):(e.numOfLikes+=1,e.isLiked=!0,this.addPoints(5,"Like",i)))}):this.toastr.error(e.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(i){this.spinner.show(),this.userService.addBookmark({post_id:i}).subscribe(e=>{this.spinner.hide(),200===e.statusCode?this.timewalls.find(e=>{e._id==i&&(e.isBookmarked=!e.isBookmarked),e.isBookmarked?this.addPoints(5,"Bookmark",i):this.addPoints(-5,"Unbookmark",i)}):this.toastr.error(e.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(i){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:o.N.front_url+`?type=timewall&id=${i}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(r.K),n.Y36(l._W),n.Y36(c.t2))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-vrzone"]],decls:8,vars:4,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],[1,"other_dig_ele_con_w_in"],["class","showcase_wrp",4,"ngFor","ngForOf"],[1,"showcase_wrp"],[1,"showcase_img_wrp"],[1,"showcase_img",3,"src"],[1,"showcase_play_icon",3,"routerLink"],["src","assets/images/play_icon.png"],[1,"showcase_icon_wrp"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt",4,"ngIf"],[3,"routerLink"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"showcase_icon_txt"]],template:function(i,e){1&i&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h2"),n._uU(4,"VR Zone"),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.YNc(7,_,28,20,"div",5),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&i&&(n.Q6J("showMenu",!0)("backUrl","")("showSearch",!0),n.xp6(7),n.Q6J("ngForOf",e.timewalls))},directives:[d.G,s.sg,a.yS,s.mk,s.O5],styles:[""]}),i})();var Z=t(9609),w=t(1462);const k=["container"];function f(i,e){if(1&i&&(n.TgZ(0,"span",46),n._uU(1),n.qZA()),2&i){const i=n.oxw();n.xp6(1),n.Oqu(i.timewallDetails.likes.length)}}function v(i,e){if(1&i&&(n.TgZ(0,"span",47),n._uU(1),n.qZA()),2&i){const i=n.oxw();n.xp6(1),n.Oqu(i.timewallDetails.comments.length)}}function q(i,e){if(1&i&&(n.TgZ(0,"div",48),n.TgZ(1,"div",49),n.TgZ(2,"div",50),n._UZ(3,"img",51),n.qZA(),n.qZA(),n.TgZ(4,"div",52),n.TgZ(5,"div",53),n.TgZ(6,"h6",54),n._uU(7),n.qZA(),n.TgZ(8,"span",55),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",56),n._uU(11),n.qZA(),n.qZA(),n.qZA()),2&i){const i=e.$implicit,t=n.oxw();n.xp6(7),n.Oqu(i.user_id.name),n.xp6(2),n.Oqu(t.timeFormat(i.createdAt)),n.xp6(2),n.hij(" ",i.comment," ")}}function A(i,e){if(1&i){const i=n.EpF();n.TgZ(0,"button",57),n.NdJ("click",function(){return n.CHM(i),n.oxw().addComment()}),n._UZ(1,"img",58),n.qZA()}}function T(i,e){if(1&i&&(n.TgZ(0,"div",59),n.TgZ(1,"div",60),n._UZ(2,"img",61),n._uU(3),n.qZA(),n.qZA()),2&i){const i=e.$implicit;n.xp6(3),n.hij(" ",i.user_id.name," ")}}const b=function(i){return{active:i}},x=[{path:"",component:u},{path:"detail/:id",data:{header:!0},component:(()=>{class i{constructor(i,e,t,s){this.route=i,this.userService=e,this.toastr=t,this.spinner=s,this.timewallDetails={},this.comment="",this.modules=[{name:"Welding",image:"assets/images/btn-one4.png",package_name:"com.RamsCreative.IOCL_Welding",apk_url:"/apks/ioclWellding.apk"},{name:"SCBA",image:"assets/images/btn-one2.png",package_name:"com.Rams.scba",apk_url:"/apks/scba.apk"},{name:"Confined Space",image:"assets/images/btn-one5.png",package_name:"com.YeppAr.ConfinedSpace",apk_url:"/apks/cs.apk"},{name:"Working At Height",image:"assets/images/btn-one6.png",package_name:"com.RamsCreative.IOCL_Welding",apk_url:"/apks/wah.apk"}],Z.updateLocale("en",{relativeTime:{future:"in %s",past:"%s",s:"just now",ss:"%d seconds ago",m:"a minute ago",mm:"%d minutes ago",h:"an hour ago",hh:"%dh ago",d:"a day ago",dd:"%d days ago",M:"a month ago",MM:"%d months ago",y:"a year ago",yy:"%d years ago"}})}ngAfterViewInit(){this.route.params.subscribe(i=>{this.timewallDetail(i.id)})}ngOnInit(){this.timewallDetails.moduleInfo={}}addPoints(i,e){this.userService.addPoints({post_id:this.timewallDetails._id,points:i,activity:e}).subscribe(i=>{})}addHistory(i){this.userService.addHistory({post_id:i}).subscribe(i=>{})}timewallDetail(i){this.spinner.show(),this.userService.postDetail({id:i}).subscribe(e=>{if(this.spinner.hide(),200===e.statusCode){this.timewallDetails=e.data.post,this.timewallDetails.moduleInfo=this.findModuleName(this.timewallDetails.title),this.timewallDetails.video=o.N.api_url+"/post/videos/"+this.timewallDetails.video,this.timewallDetails.thumbnail=o.N.api_url+"/post/thumbnail/"+this.timewallDetails.thumbnail;let t=document.createElement("video");t.style.display="none",t.crossOrigin="",t.autoplay=!0,t.muted=!0,t.controls=!0,null==t||t.addEventListener("loadedmetadata",()=>{t.play()}),t.onended=()=>{this.addPoints(10,"Video Watched")},document.body.appendChild(t),this.viewer=new PANOLENS.Viewer({output:"console",cameraFov:65,container:this.container.nativeElement,horizontalView:!1,controlButtons:["video"],autoHideInfospot:!1});let s=new PANOLENS.VideoPanorama(this.timewallDetails.video,{videoElement:t,autoplay:!0,muted:!0,loop:!1,playsinline:!0});this.viewer.add(s),this.addPoints(5,"Video Click"),this.addHistory(i)}else this.toastr.error(e.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}playPause(){const i=document.getElementById("timewallVideo");i.paused?i.play():i.pause()}timeFormat(i){return Z(i).fromNow()}addComment(){this.spinner.show(),this.userService.addComment({post_id:this.timewallDetails._id,comment:this.comment}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.comments.push(i.data.comment),setTimeout(()=>{const i=document.getElementById("commentsDiv");i.scrollTop=i.scrollHeight},100),this.comment="",this.addPoints(5,"Comment")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addLike(){this.spinner.show(),this.userService.addLike({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isLiked=!this.timewallDetails.isLiked,this.timewallDetails.likes=i.data.likes,this.timewallDetails.isLiked?this.addPoints(5,"Like"):this.addPoints(-5,"Unlike")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}addBookmark(){this.spinner.show(),this.userService.addBookmark({post_id:this.timewallDetails._id}).subscribe(i=>{this.spinner.hide(),200===i.statusCode?(this.timewallDetails.isBookmarked=!this.timewallDetails.isBookmarked,this.timewallDetails.isBookmarked?this.addPoints(5,"Bookmark"):this.addPoints(-5,"Unbookmark")):this.toastr.error(i.message,"Error")},i=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}postShare(){window.plugins.socialsharing.shareWithOptions({message:"Check this out at Indian Oil",subject:"Check this out at Indian Oil",files:[],url:o.N.front_url+`?type=timewall&id=${this.timewallDetails._id}`},function(i){console.log("Share completed? "+i.completed),console.log("Shared to app: "+i.app)},function(i){console.log("Sharing failed with message: "+i)})}openVrApp(i){window.openVrApp(o.N.api_url+i.apk_url,i.package_name)}findModuleName(i){return this.modules.find(e=>e.name===i)}}return i.\u0275fac=function(e){return new(e||i)(n.Y36(a.gz),n.Y36(r.K),n.Y36(l._W),n.Y36(c.t2))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-detail"]],viewQuery:function(i,e){if(1&i&&n.Gf(k,5),2&i){let i;n.iGM(i=n.CRH())&&(e.container=i.first)}},decls:61,vars:18,consts:[[3,"showMenu","backUrl","showSearch"],[1,"page_mid_area"],[1,"other_dig_ele_wrp"],[1,"other_dig_ele_con_w"],["id","commentsDiv",1,"other_dig_ele_con_w_in","setting_in_wrp"],[1,"showcase_wrp","detail_wall_wrp_l"],[1,"showcase_img_wrp"],["id","container",1,"panolens-container","canvas_30vh_ne"],["container",""],[1,"showcase_icon_wrp","wall_detail_icon"],[1,"likebtn_list"],[2,"margin-right","5px",3,"click"],["src","assets/images/like_icon.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/like_icon_active.png",1,"showcase_icon","like_thub_l"],["class","showcase_icon_txt","data-toggle","modal","data-target","#likeModal",4,"ngIf"],["href","javascript:void(0)"],["src","assets/images/comment_icon.png",1,"showcase_icon"],["class","showcase_icon_txt",4,"ngIf"],["href","javascript:void(0)",1,"likebtn_list",3,"click"],["src","assets/images/bookmark.png",1,"showcase_icon",3,"ngClass"],["src","assets/images/bookmark_active.png",1,"showcase_icon","like_thub_l"],[1,"float-right"],["href","javascript:void(0)",3,"click"],["src","assets/images/share_icon.png",1,"showcase_icon"],[1,"showcase_txt_wrp"],[1,"spacesbtn"],["href","javascript:void(0)",1,"awd_cert_btn",3,"click"],[1,"",3,"src"],[1,"d-flex","align-items-center","justify-content-center","cmt_wrp"],[1,"container"],[1,"row","justify-content-center","mb-4"],[1,"col-lg-8"],[1,"comments","padd_botm50"],["class","comment d-flex mb-4",4,"ngFor","ngForOf"],[1,"row","justify-content-center","cmt_frm_wrp","cmt_frm_fixed_botm"],[1,"comment-form","d-flex","align-items-center"],[1,"flex-grow-1","ms-2","ms-sm-3"],["rows","1","placeholder","Start writing...",1,"form-control","py-0","px-1","border-0","textarea_cmd",2,"resize","none",3,"ngModel","ngModelChange"],["class","send_btn_cmt",3,"click",4,"ngIf"],["id","likeModal",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],["type","button","data-dismiss","modal",1,"close","poup_close"],[1,"modal-body"],[1,"like_user_list"],["class","score_p leaderbord_list",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#likeModal",1,"showcase_icon_txt"],[1,"showcase_icon_txt"],[1,"comment","d-flex","mb-4"],[1,"flex-shrink-0"],[1,"avatar","avatar-sm","rounded-circle"],["src","assets/images/profile_pic.png","alt","",1,"avatar-img"],[1,"flex-shrink-1","ms-2","ms-sm-3"],[1,"comment-meta","d-flex"],[1,"me-2"],[1,"text-muted"],[1,"comment-body"],[1,"send_btn_cmt",3,"click"],["src","assets/images/send.png"],[1,"score_p","leaderbord_list"],[1,"score_p_left"],["src","assets/images/profile_pic.png",1,"profile_pic"]],template:function(i,e){1&i&&(n._UZ(0,"app-header",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h2"),n._uU(4,"VR Zone"),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n._UZ(9,"div",7,8),n.TgZ(11,"ul",9),n.TgZ(12,"li"),n.TgZ(13,"span",10),n.TgZ(14,"span",11),n.NdJ("click",function(){return e.addLike()}),n._UZ(15,"img",12),n._UZ(16,"img",13),n.qZA(),n.YNc(17,f,2,1,"span",14),n.qZA(),n.qZA(),n.TgZ(18,"li"),n.TgZ(19,"a",15),n._UZ(20,"img",16),n.YNc(21,v,2,1,"span",17),n.qZA(),n.qZA(),n.TgZ(22,"li"),n.TgZ(23,"a",18),n.NdJ("click",function(){return e.addBookmark()}),n._UZ(24,"img",19),n._UZ(25,"img",20),n.qZA(),n.qZA(),n.TgZ(26,"li",21),n.TgZ(27,"a",22),n.NdJ("click",function(){return e.postShare()}),n._UZ(28,"img",23),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(29,"div",24),n.TgZ(30,"h3"),n._uU(31),n.qZA(),n.TgZ(32,"p"),n._uU(33),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",25),n.TgZ(35,"a",26),n.NdJ("click",function(){return e.openVrApp(e.timewallDetails.moduleInfo)}),n._UZ(36,"img",27),n.qZA(),n.qZA(),n.TgZ(37,"div",28),n.TgZ(38,"div",29),n.TgZ(39,"div",30),n.TgZ(40,"div",31),n.TgZ(41,"h5"),n._uU(42,"Comments"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(43,"div",30),n.TgZ(44,"div",31),n.TgZ(45,"div",32),n.YNc(46,q,12,3,"div",33),n.qZA(),n.qZA(),n.qZA(),n.TgZ(47,"div",34),n.TgZ(48,"div",31),n.TgZ(49,"div",35),n.TgZ(50,"div",36),n.TgZ(51,"textarea",37),n.NdJ("ngModelChange",function(i){return e.comment=i}),n.qZA(),n.YNc(52,A,2,0,"button",38),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(53,"div",39),n.TgZ(54,"div",40),n.TgZ(55,"div",41),n.TgZ(56,"button",42),n._uU(57,"\xd7"),n.qZA(),n.TgZ(58,"div",43),n.TgZ(59,"div",44),n.YNc(60,T,4,1,"div",45),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&i&&(n.Q6J("showMenu",!1)("backUrl","/vrzone")("showSearch",!1),n.xp6(15),n.Q6J("ngClass",n.VKq(14,b,e.timewallDetails.isLiked)),n.xp6(2),n.Q6J("ngIf",e.timewallDetails.likes&&e.timewallDetails.likes.length),n.xp6(4),n.Q6J("ngIf",e.timewallDetails.comments&&e.timewallDetails.comments.length),n.xp6(3),n.Q6J("ngClass",n.VKq(16,b,e.timewallDetails.isBookmarked)),n.xp6(7),n.Oqu(e.timewallDetails.title),n.xp6(2),n.Oqu(e.timewallDetails.description),n.xp6(3),n.Q6J("src",e.timewallDetails.moduleInfo.image,n.LSH),n.xp6(10),n.Q6J("ngForOf",e.timewallDetails.comments),n.xp6(5),n.Q6J("ngModel",e.comment),n.xp6(1),n.Q6J("ngIf",e.comment),n.xp6(8),n.Q6J("ngForOf",e.timewallDetails.likes))},directives:[d.G,s.mk,s.O5,s.sg,w.Fj,w.JJ,w.On],styles:[".other_dig_ele_con_w_in.setting_in_wrp[_ngcontent-%COMP%]{height:calc(100vh - 216px)}.showcase_wrp.detail_wall_wrp_l[_ngcontent-%COMP%]{margin-top:0}"]}),i})()}];let C=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),i})();var U=t(5425);let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[s.ez,C,U.m,w.u5,w.UX]]}),i})()}}]);